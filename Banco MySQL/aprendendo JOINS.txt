CREATE DATABASE correios;

CREATE TABLE cliente(
id_cliente INT,
nome VARCHAR(45),
cidade VARCHAR(45)
);

CREATE TABLE acompanhamento(
id_acompanhamento INT,
situacao VARCHAR(45)
);

CREATE TABLE  pedido(
id_pedido INT,
data_pedido DATE,
valor DECIMAL(8,2),
cliente_id INT,
acompanhamento_id INT
); 

INSERT INTO cliente
(id_cliente, nome, cidade)
VALUES
('1','João','Macaé'),
('2','Carlos','Salvador'),
('3','Maria','Niterói'),
('4','Ana','Campinas'),
('5','Marcos','Santos');

SELECT * FROM cliente;

INSERT INTO acompanhamento
(id_acompanhamento, situacao)
VALUES
('1','Registrado'),
('2','Em transporte'),
('3','Entregue');

SELECT * FROM acompanhamento;

INSERT INTO pedido
(id_pedido, data_pedido, valor, cliente_id, acompanhamento_id)
VALUES
('1','2024-09-24','250.00','2','1'),
('2','2024-09-25','150.00','1','2'),
('3','2024-09-25','450.00','4','3');

SELECT * FROM pedido;

-- Desta forma usando o join para juntar as tabelas ⬇️
SELECT * FROM pedido
JOIN cliente;


SELECT pedido.id_pedido, pedido.data_pedido, cliente.nome, acompanhamento.situacao FROM pedido
JOIN cliente
ON pedido.cliente_id = cliente.id_cliente
JOIN acompanhamento
ON pedido.acompanhamento_id = acompanhamento.id_acompanhamento;


-- Utilizando view ⬇️
CREATE VIEW vw_consulta_cliente_pedido_situacao AS
SELECT pedido.id_pedido, pedido.data_pedido, cliente.nome, acompanhamento.situacao FROM pedido
JOIN cliente
ON pedido.cliente_id = cliente.id_cliente
JOIN acompanhamento
ON pedido.acompanhamento_id = acompanhamento.id_acompanhamento;

SELECT * FROM vw_consulta_cliente_pedido_situacao;

CREATE DATABASE familia;



CREATE TABLE filho(
id_filho INT AUTO_INCREMENT NOT NULL PRIMARY KEY,
nome_filho VARCHAR(45)
);

CREATE TABLE pai(
id_pai INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
nome_pai VARCHAR(45),
filho_id INT, 
FOREIGN KEY (filho_id) REFERENCES filho (id_filho)
);

INSERT INTO filho
(nome_filho)
VALUES
('Joaozinho'),
('Mariazinha'),
('Carlinha'),
('');

INSERT INTO pai
(nome_pai, filho_id)
VALUES
('Antonio',4),
('Antonio',3),
('Carlos',2);

INSERT INTO pai
(nome_pai)
VALUES
('Mateus');

SELECT * FROM pai;
SELECT * FROM filho;


-- Utilizando JOIN ⬇️
SELECT pai.nome_pai, filho.nome_filho FROM pai
JOIN filho
ON pai.filho_id = filho.id_filho;

-- Utilizando LEFT JOIN ⬇️
SELECT pai.nome_pai, filho.nome_filho FROM pai LEFT JOIN filho
ON pai.filho_id = filho.id_filho;

-- Utilizando RIGHT JOIN ⬇️
SELECT pai.nome_pai, filho.nome_filho FROM pai RIGHT JOIN filho
ON pai.filho_id = filho.id_filho;

-- Utilizando FULL junção dos dois ⬇️
SELECT pai.nome_pai, filho.nome_filho FROM pai LEFT JOIN filho
ON pai.filho_id = filho.id_filho
UNION
SELECT pai.nome_pai, filho.nome_filho FROM pai RIGHT JOIN filho
ON pai.filho_id = filho.id_filho;